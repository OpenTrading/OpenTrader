#  These tests test some of the common Mt4 commands.
# These tests will only work if you have an OTMql4AMQP enabled Metatrader running,
# the Experts/OTMql4/OTPyTestPikaEA.mq4 attached to a chart in it, and
# the RabbitMQ server configured and running.
set echo True
# set the on-line target to be the default from OTCmd2.ini
sub get
# set the on-line target to be the only one that works right now :-)
sub set RabbitMQ
# We need a listener thread running, subscribed to retval.#
sub run retval.# timer.#
py import time
py time.sleep(15)
# get the list of charts we have seen because of listening to the timer
chart list
py assert type(self._G) == list and len(self._G) > 0
# set the default chart to the first of list of charts we have seen
chart set
# check the default chart 
chart get
py assert type(self._G) == str and len(self._G) > 0
pub wait OrdersTotal
py assert type(self._G) == int and self._G >= 0
pub wait Period
py assert type(self._G) == int and self._G > 0
pub wait RefreshRates
py assert self._G == True
pub wait Symbol
py assert type(self._G) == str and len(self._G) >= 3
pub wait TerminalCompany
py assert type(self._G) == str and len(self._G) > 3
pub wait TerminalName
py assert type(self._G) == str and len(self._G) > 3
pub wait TerminalPath
py assert type(self._G) == str and len(self._G) > 3
pub wait WindowBarsPerChart
py assert type(self._G) == int and type(self._G) > 0
##? string -1 pub wait WindowFind
pub wait WindowFirstVisibleBar
py assert type(self._G) == int and type(self._G) > 0
##? void pub wait WindowRedraw
pub wait WindowsTotal
py assert type(self._G) == int and type(self._G) > 0
exit
